<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>服务器常用维护命令</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a3a 0%, #0d1825 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #4dabf7, #339af0);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .subtitle {
            font-size: 1.1rem;
            color: #a0aec0;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .commands-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(550px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        @media (max-width: 1200px) {
            .commands-container {
                grid-template-columns: repeat(auto-fill, minmax(450px, 1fr));
            }
        }
        
        @media (max-width: 768px) {
            .commands-container {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2.2rem;
            }
        }
        
        .command-card {
            background: rgba(30, 41, 59, 0.85);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.08);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .command-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
            border-color: rgba(59, 130, 246, 0.5);
        }
        
        .command-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .command-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #63b3ed;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .command-title i {
            font-size: 1.2rem;
        }
        
        .command-category {
            display: inline-block;
            background: rgba(59, 130, 246, 0.2);
            color: #63b3ed;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            margin-left: 10px;
        }
        
        .command-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 8px 16px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
            font-size: 0.95rem;
        }
        
        .btn-edit {
            background: rgba(59, 130, 246, 0.15);
            color: #63b3ed;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }
        
        .btn-edit:hover {
            background: rgba(59, 130, 246, 0.25);
        }
        
        .btn-copy {
            background: rgba(16, 185, 129, 0.15);
            color: #34d399;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }
        
        .btn-copy:hover {
            background: rgba(16, 185, 129, 0.25);
        }
        
        .btn-reset {
            background: rgba(245, 158, 11, 0.15);
            color: #fbbf24;
            border: 1px solid rgba(245, 158, 11, 0.3);
        }
        
        .btn-reset:hover {
            background: rgba(245, 158, 11, 0.25);
        }
        
        .command-content {
            margin-bottom: 20px;
        }
        
        .command-text {
            background: rgba(15, 23, 42, 0.8);
            border-radius: 8px;
            padding: 18px;
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            line-height: 1.5;
            color: #cbd5e0;
            white-space: pre-wrap;
            word-break: break-all;
            border: 1px solid rgba(255, 255, 255, 0.05);
            min-height: 80px;
            margin-bottom: 10px;
            overflow-x: auto;
        }
        
        .command-editor {
            width: 100%;
            min-height: 120px;
            background: rgba(15, 23, 42, 0.9);
            border-radius: 8px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            line-height: 1.5;
            color: #cbd5e0;
            border: 1px solid rgba(59, 130, 246, 0.5);
            resize: vertical;
            display: none;
        }
        
        .editor-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 10px;
            display: none;
        }
        
        .btn-save {
            background: rgba(59, 130, 246, 0.2);
            color: #63b3ed;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }
        
        .btn-cancel {
            background: rgba(239, 68, 68, 0.15);
            color: #f87171;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        
        .notification {
            position: fixed;
            top: 30px;
            right: 30px;
            padding: 15px 25px;
            border-radius: 8px;
            background: rgba(16, 185, 129, 0.9);
            color: white;
            font-weight: 600;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateX(150%);
            transition: transform 0.4s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.error {
            background: rgba(239, 68, 68, 0.9);
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #a0aec0;
            font-size: 0.9rem;
        }
        
        .usage-tips {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
            border-left: 4px solid #3b82f6;
        }
        
        .usage-tips h3 {
            margin-bottom: 10px;
            color: #63b3ed;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .usage-tips ul {
            padding-left: 20px;
        }
        
        .usage-tips li {
            margin-bottom: 8px;
            line-height: 1.5;
        }
        
        .card-icon {
            width: 50px;
            height: 50px;
            background: rgba(59, 130, 246, 0.2);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: #63b3ed;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-server"></i> 服务器常用维护命令</h1>
            <p class="subtitle">一个便捷的服务器维护命令管理工具。您可以直接编辑命令内容，然后一键复制到剪贴板。所有命令已按类别分组，便于快速查找和使用。</p>
        </header>
        
        <main>
            <div class="commands-container" id="commandsContainer">
                <!-- 命令卡片将通过JavaScript动态生成 -->
            </div>
            
            <div class="usage-tips">
                <h3><i class="fas fa-lightbulb"></i> 使用提示</h3>
                <ul>
                    <li>点击<span style="color:#63b3ed;">"编辑"</span>按钮可以修改命令内容</li>
                    <li>点击<span style="color:#34d399;">"复制"</span>按钮可以将命令复制到剪贴板</li>
                    <li>如果您修改了命令但想恢复原样，点击<span style="color:#fbbf24;">"重置"</span>按钮</li>
                    <li>在编辑模式下，您可以对命令进行任意修改，然后保存更改</li>
                    <li>所有命令都支持多行编辑，适合复杂命令的调整</li>
                </ul>
            </div>
        </main>
        
        <footer>
            <p>服务器维护命令工具 &copy; 2023 | 专为系统管理员设计</p>
            <p style="margin-top: 5px; font-size: 0.8rem;">注意：使用命令前请确保您了解命令的作用，避免对服务器造成意外影响。</p>
        </footer>
        
        <div class="notification" id="notification">
            <i class="fas fa-check-circle"></i>
            <span>命令已成功复制到剪贴板！</span>
        </div>
    </div>

    <script>
        // 命令数据
        const commands = [
            {
                id: 1,
                title: "重启前端引擎",
                command: "systemctl restart nginx",
                category: "服务管理",
                icon: "fas fa-redo"
            },
            {
                id: 2,
                title: "引擎状态",
                command: "systemctl status nginx",
                category: "服务管理",
                icon: "fas fa-info-circle"
            },
            {
                id: 3,
                title: "测试配置",
                command: "nginx -t",
                category: "配置检查",
                icon: "fas fa-vial"
            },
            {
                id: 4,
                title: "ACME 升级",
                command: "acme.sh --upgrade",
                category: "ACME 相关",
                icon: "fas fa-arrow-up"
            },
            {
                id: 5,
                title: "进入规则目录",
                command: "cd /www/server/panel/vhost/rule",
                category: "规则目录操作",
                icon: "fas fa-folder-open"
            },
            {
                id: 6,
                title: "规则目录列表",
                command: "ls -la /www/server/panel/vhost/rule",
                category: "规则目录操作",
                icon: "fas fa-list"
            },
            {
                id: 7,
                title: "规则目录统计",
                command: "ls /www/server/panel/vhost/rule | wc -l",
                category: "规则目录操作",
                icon: "fas fa-calculator"
            },
            {
                id: 8,
                title: "查找特定规则文件",
                command: 'find /www/server/panel/vhost/rule -name "*.conf"',
                category: "规则目录操作",
                icon: "fas fa-search"
            },
            {
                id: 9,
                title: "向指定文件第一行插入代码",
                command: "sed -i '1i allow 8.8.8.0/24;' fIP.conf",
                category: "文件编辑",
                icon: "fas fa-edit"
            },
            {
                id: 10,
                title: "删除第一行代码",
                command: "sed -i '1d' fIP.conf",
                category: "文件编辑",
                icon: "fas fa-trash-alt"
            },
            {
                id: 11,
                title: "当前目录所有文件在第一行增加代码",
                command: `for file in *; do
  [ -f "$file" ] && sed -i '1i allow 182.246.40.27;' "$file"
done`,
                category: "文件编辑",
                icon: "fas fa-file-code"
            },
            {
                id: 12,
                title: "当前目录所有文件删除第一行代码",
                command: `for file in *; do
  [ -f "$file" ] && sed -i '1d' "$file"
done`,
                category: "文件编辑",
                icon: "fas fa-trash"
            }
        ];

        // 初始化应用
        document.addEventListener('DOMContentLoaded', function() {
            const commandsContainer = document.getElementById('commandsContainer');
            const notification = document.getElementById('notification');
            
            // 生成命令卡片
            commands.forEach(cmd => {
                const commandCard = createCommandCard(cmd);
                commandsContainer.appendChild(commandCard);
            });
            
            // 创建命令卡片
            function createCommandCard(cmd) {
                const card = document.createElement('div');
                card.className = 'command-card';
                card.dataset.id = cmd.id;
                
                // 生成卡片HTML
                card.innerHTML = `
                    <div class="command-header">
                        <div>
                            <div class="command-title">
                                <i class="${cmd.icon}"></i>
                                <span>${cmd.title}</span>
                                <span class="command-category">${cmd.category}</span>
                            </div>
                        </div>
                        <div class="command-actions">
                            <button class="btn btn-edit" onclick="editCommand(${cmd.id})">
                                <i class="fas fa-edit"></i> 编辑
                            </button>
                            <button class="btn btn-copy" onclick="copyCommand(${cmd.id})">
                                <i class="fas fa-copy"></i> 复制
                            </button>
                            <button class="btn btn-reset" onclick="resetCommand(${cmd.id})">
                                <i class="fas fa-undo"></i> 重置
                            </button>
                        </div>
                    </div>
                    <div class="command-content">
                        <div class="command-text" id="command-text-${cmd.id}">${escapeHtml(cmd.command)}</div>
                        <textarea class="command-editor" id="command-editor-${cmd.id}">${escapeHtml(cmd.command)}</textarea>
                        <div class="editor-actions" id="editor-actions-${cmd.id}">
                            <button class="btn btn-cancel" onclick="cancelEdit(${cmd.id})">
                                <i class="fas fa-times"></i> 取消
                            </button>
                            <button class="btn btn-save" onclick="saveCommand(${cmd.id})">
                                <i class="fas fa-check"></i> 保存
                            </button>
                        </div>
                    </div>
                `;
                
                return card;
            }
            
            // 转义HTML特殊字符
            function escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
            
            // 显示通知
            window.showNotification = function(message, isError = false) {
                const notification = document.getElementById('notification');
                const icon = notification.querySelector('i');
                const text = notification.querySelector('span');
                
                text.textContent = message;
                
                if (isError) {
                    notification.classList.add('error');
                    icon.className = 'fas fa-exclamation-circle';
                } else {
                    notification.classList.remove('error');
                    icon.className = 'fas fa-check-circle';
                }
                
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            };
            
            // 复制命令
            window.copyCommand = function(id) {
                const commandText = document.getElementById(`command-text-${id}`);
                const textToCopy = commandText.textContent;
                
                navigator.clipboard.writeText(textToCopy).then(() => {
                    showNotification('命令已成功复制到剪贴板！');
                }).catch(err => {
                    console.error('复制失败: ', err);
                    showNotification('复制失败，请手动复制命令', true);
                });
            };
            
            // 编辑命令
            window.editCommand = function(id) {
                const commandText = document.getElementById(`command-text-${id}`);
                const commandEditor = document.getElementById(`command-editor-${id}`);
                const editorActions = document.getElementById(`editor-actions-${id}`);
                
                commandText.style.display = 'none';
                commandEditor.style.display = 'block';
                editorActions.style.display = 'flex';
                
                commandEditor.focus();
            };
            
            // 保存命令
            window.saveCommand = function(id) {
                const commandText = document.getElementById(`command-text-${id}`);
                const commandEditor = document.getElementById(`command-editor-${id}`);
                const editorActions = document.getElementById(`editor-actions-${id}`);
                const originalCommand = commands.find(cmd => cmd.id === id).command;
                
                const newCommand = commandEditor.value.trim();
                
                if (newCommand === '') {
                    showNotification('命令不能为空', true);
                    return;
                }
                
                commandText.textContent = newCommand;
                commandText.style.display = 'block';
                commandEditor.style.display = 'none';
                editorActions.style.display = 'none';
                
                showNotification('命令已成功修改！');
            };
            
            // 取消编辑
            window.cancelEdit = function(id) {
                const commandText = document.getElementById(`command-text-${id}`);
                const commandEditor = document.getElementById(`command-editor-${id}`);
                const editorActions = document.getElementById(`editor-actions-${id}`);
                const originalCommand = commands.find(cmd => cmd.id === id).command;
                
                commandEditor.value = originalCommand;
                commandText.style.display = 'block';
                commandEditor.style.display = 'none';
                editorActions.style.display = 'none';
                
                showNotification('已取消编辑', true);
            };
            
            // 重置命令
            window.resetCommand = function(id) {
                const commandText = document.getElementById(`command-text-${id}`);
                const commandEditor = document.getElementById(`command-editor-${id}`);
                const originalCommand = commands.find(cmd => cmd.id === id).command;
                
                commandText.textContent = originalCommand;
                commandEditor.value = originalCommand;
                
                showNotification('命令已重置为原始内容');
            };
        });
    </script>
</body>
</html>