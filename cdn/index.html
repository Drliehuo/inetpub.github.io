<!doctype html>
<html lang="zh">
  <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="stylesheet" href="css/cdd.css">
      <script type="text/javascript">var JS_VERSION = 1.0;</script>
      <script language="Javascript1.1">var JS_VERSION = 1.1;</script>
      <script language="Javascript1.2">var JS_VERSION = 1.2;</script>
      <script language="Javascript1.3">var JS_VERSION = 1.3;</script>
      <script language="Javascript1.4">var JS_VERSION = 1.4;</script>
      <script language="Javascript1.5">var JS_VERSION = 1.5;</script>
      <script language="Javascript1.6">var JS_VERSION = 1.6;</script>
      <script language="Javascript1.7">var JS_VERSION = 1.7;</script>
      <script language="Javascript1.8">var JS_VERSION = 1.8;</script>
      <script language="Javascript1.9">var JS_VERSION = 1.9;</script>
</head>
<body>
  <script>
    with(document)with(body)with(insertBefore(createElement("script"),firstChild))setAttribute("exparams","category=&userid=&aplus&yunid=&&trid=0bca315a17009013966523305e3685&asid=AQAAAAAUsmFl8dauBAAAAAAi6qIXpXFF9A==",id="tb-beacon-aplus",src=(location>"https"?"//g":"//g")+".alicdn.com/alilog/mlog/aplus_v2.js")
  </script>
  <div id="page">
  <h1>阿里昆仑用户诊断工具</h1>
  <div class="info">
    此页面仅用于定位您的浏览器和网络信息，不涉及您的隐私信息，请放心使用。
  </div>
  <noscript>
    <div>
      JavaScript 状态: 禁用。请开启后刷新重试。
    </div>
  </noscript>
  <div id="log">
  </div>
  <div>
  <div>
    <strong>请输入完整的URL，HTTP和HTTPS页面不能同时兼容，请勿跨协议输入。 </strong>
  </div>
  URL: <input id="urlVia" type="text" style="width:320px;" placeholder="https://inetpub.cn/" required/>
  <button onclick="viaOnload()">Load</button>
  </div>
  <div id="urlViaRes"></div>
  <script src="js/cdd.js"></script>
  <script src="js/cdd_load.js"></script>
  <script src="js/cdd_plugin.js"></script>
  <script src="js/BW_plugin.js"></script>
  <script src="js/MW.js"></script>
  <script>// Generated by CoffeeScript 1.6.2
(function() {
  var getAlibabaInfo, getSinaInfo, getTencentInfo, getTaobaoInfo, getDetailInfo, getAssetsCDNInfo, getBrowserInfo, getCookieEnable, getFlashVersion, getImageCDNInfo, getIp, getLDNS, getOSInfo, getPasswordControlInstalledText, getPasswordControlVersion, getUAString, getUrlVia, isMac, jsonp, log;
  log = function(msg, config) {
    var el, tagname, wrapperEl;
    msg = msg.split("：");
    msg = "<div style=\"\">\n  <span style=\"color:#666;\">" + msg[0] + "：</span>\n  <span>" + (msg.slice(1).join("：") || "") + "</span>\n</div>";
    tagname = config && config.tagname || "div";
    el = jQuery("<" + tagname + ">" + msg + "</" + tagname + ">");
    if (typeof config === "string") {
      config = {
        "id": config
      };
    }
    if (!config || !config.id) {
      return el.appendTo("#log");
    }
    wrapperEl = jQuery("#" + config.id);
    if (wrapperEl.length) {
      if (config.type === "clear") {
        wrapperEl.html("");
      }
      return el.appendTo(wrapperEl);
    } else {
      el.attr("id", config.id);
      return el.appendTo("#log");
    }
  };
  getIp = function(cb) {
    var URL;
    URL = "http://110.75.20.230/yunqian/troubleshooter/ip_proxy.php?callback=?";
    return jQuery.getJSON(URL, cb);
  };
  getCookieEnable = function() {
    return document.cookie || navigator.cookieEnabled;
  };
  getFlashVersion = function() {
    var axo, e;
    try {
      try {
        axo = new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");
        try {
          axo.AllowScriptAccess = "always";
        } catch (_error) {
          e = _error;
          return "6,0,0";
        }
      } catch (_error) {
        e = _error;
      }
      return new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version').replace(/\D+/g, ',').match(/^,?(.+),?$/)[1];
    } catch (_error) {
      e = _error;
      try {
        if (navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin) {
          return (navigator.plugins["Shockwave Flash 2.0"] || navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g, ",").match(/^,?(.+),?$/)[1];
        }
      } catch (_error) {
        e = _error;
      }
    }
    return "0,0,0";
  };
  getOSInfo = function() {
    var item, token, ua, _i, _len;
    ua = navigator.userAgent;
    token = [["Windows NT 5.1", "WinXP"], ["Windows NT 6.0", "WinVista"], ["Windows NT 10.0", "Windows 10"], ["Windows NT 6.1", "Win7"], ["Windows NT 5.2", "Win2003"], ["Windows NT 5.0", "Win2000"], ["Macintosh", "Macintosh"], ["Windows", "WinOther"], ["Ubuntu", "Ubuntu"], ["Linux", "Linux"]];
    for (_i = 0, _len = token.length; _i < _len; _i++) {
      item = token[_i];
      if (ua.indexOf(item[0]) > -1) {
        return item[1];
      }
    }
    return "Other";
  };
  getUAString = function() {
    return navigator.userAgent;
  };
  getBrowserInfo = function() {
    var item, token, ua, _i, _len;
    ua = navigator.userAgent;
    token = ["Opera", "Chrome", "Safari", "MSIE 6", "MSIE 7", "MSIE 8", "Firefox"];
    for (_i = 0, _len = token.length; _i < _len; _i++) {
      item = token[_i];
      if (ua.indexOf(item) > -1) {
        return item.replace(" ", "");
      }
    }
    return "Other";
  };
  getImageCDNInfo = function(cb) {
    var check, count, imgs, item, _i, _len, _results;
    imgs = [["https://47.108.75.52/upload/202212/TDRszD6NwXEV7F2Q6n32eMs4uq6UGUAt.jpg", 240, 135], ["https://47.108.75.52/upload/202211/SGevs559TEyGuvcpppc32nBBjWS84Fth.jpg", 240, 135], ["https://47.108.75.52/upload/202301/MpKVK5m3hB5g3zJs6N29648Y994P7UFt.jpg", 240, 135]];
    count = 0;
    check = function() {
      var arr, item;
      count = count + 1;
      if (count < imgs.length) {
        return;
      }
      arr = (function() {
        var _i, _len, _results;
        _results = [];
        for (_i = 0, _len = imgs.length; _i < _len; _i++) {
          item = imgs[_i];
          if (item[3]) {
            _results.push(item);
          }
        }
        return _results;
      })();
      return typeof cb === "function" ? cb(arr.length, imgs.length) : void 0;
    };
    _results = [];
    for (_i = 0, _len = imgs.length; _i < _len; _i++) {
      item = imgs[_i];
      _results.push((function() {
        var height, img, j, sep, source, width;
        source = item[0], width = item[1], height = item[2];
        img = new Image();
        sep = source.indexOf("?") > -1 ? "&" : "?";
        img.src = "" + source + sep + "t=" + (+new Date());
        j = item;
        img.onload = function() {
          j.push(img.width === width && img.height === height);
          return check();
        };
        return img.onerror = function() {
          j.push(false);
          return check();
        };
      })());
    }
    return _results;
  };
  getTencentInfo = function(cb) {
    var asset, assets;
    asset = "https://bekid.oss-cn-chengdu.aliyuncs.com/dct.js";
    return jQuery.ajax({
      url: asset,
      dataType: "script",
      success: function() {
        return cb(1);
      },
      error: function() {
        return cb(0);
      },
      timeout: 4000
    });
  };
  getYoukuInfo = function(cb) {
    var asset, assets;
    asset = "https://static.youku.com/paymentcenter/activity/alipay/js/libs/flexible.js";
    return jQuery.ajax({
      url: asset,
      dataType: "script",
      success: function() {
        return cb(1);
      },
      error: function() {
        return cb(0);
      },
      timeout: 4000
    });
  };
  getSinaInfo = function(cb) {
    var asset, assets;
    asset = "https://www.bekid.cn";
    return jQuery.ajax({
      url: asset,
      dataType: "script",
      success: function() {
        return cb(1);
      },
      error: function() {
        return cb(0);
      },
      timeout: 4000
    });
  };
  getTaobaoInfo = function(cb) {
    var asset, assets;
    asset = "https://www.taobao.com";
    return jQuery.ajax({
      url: asset,
      dataType: "script",
      success: function() {
        return cb(1);
      },
      error: function() {
        return cb(0);
      },
      timeout: 4000
    });
  };
  getDetailInfo = function(cb) {
    var asset, assets;
    asset = "https://item.taobao.com/auction/noitem.htm";
    return jQuery.ajax({
      url: asset,
      dataType: "script",
      success: function() {
        return cb(1);
      },
      error: function() {
        return cb(0);
      },
      timeout: 4000
    });
  };
  getAlibabaInfo = function(cb) {
    var asset, assets;
    asset = "https://www.alibaba.com";
    return jQuery.ajax({
      url: asset,
      dataType: "script",
      success: function() {
        return cb(1);
      },
      error: function() {
        return cb(0);
      },
      timeout: 4000
    });
  };
  getAssetsCDNInfo = function(cb) {
    var asset, assets;
    asset = "https://g.alicdn.com/tb/tracker/3.0.4/index.js";
    return jQuery.ajax({
      url: asset,
      dataType: "script",
      success: function() {
        return cb(1);
      },
      error: function() {
        return cb(0);
      },
      timeout: 4000
    });
  };
  isMac = function() {
    return navigator.platform === "MacIntel";
  };
  getPasswordControlVersion = function(cb) {
    light.has('page/products') || light.register('page/products');
    light.has('page/scProducts') || light.register('page/scProducts', light, []);
    return light.ready(function() {
      var edit, options, s;
      s = alipay.security;
      edit;
      options = {
        container: "payPassword_container",
        id: "edit_payPassword",
        name: "edit_payPassword",
        hidnId: "payPassword",
        width: "180",
        height: "24",
        tabindex: "",
        passwordMode: "1",
        timestamp: "8263170979",
        pk: "MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDS92pDVyWNT7dzG9zH0opH44z9FayCZTX5iqGUxUjPi667IkyaqrsmDPqKsJp47lJ29lzs+Qv8zjPPdmnxjFteMrfpc4ui24gL1iZnchwX87Ox/+Xrm8HFmKlhmUO9n/QgTT+Nz1RGMEN1+HijvsoAhS0TS8XjSfzRkrwvK2pJQIDAQAB"
      };
      edit = window.light.page.products["payPassword"] = s.create(s.edit, options);
      s.edit.installed && edit.render();
      edit.available = true;
      return typeof cb === "function" ? cb(edit.getVersion()) : void 0;
    });
  };
  getPasswordControlInstalledText = function() {
    if (!isMac()) {
      return "已安装";
    }
    return "已安装 (版本号：" + macPasswordControlversion + ")\n<a href=\"http://download.alipay.com/sec/edit/wkaliedit.dmg\">下载最新版 Mac 安全控件</a>";
  };
  jsonp = function(url, cb) {
    return jQuery.ajax({
      url: url,
      dataType: "jsonp",
      jsonp: "cb",
      success: cb
    });
  };
  function guid() {
    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
      var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);
      return v.toString(16);
    });
  }
  getLDNS = function(cb) {
    var uuid = guid();
    var url = "https://" + uuid + ".dns-detect.alicdn.com/api/detect/DescribeDNSLookup"
    return jsonp(url, cb);
  };
  getUrlVia = function(url, cb){
    var xmlhttp;
    xmlhttp=null;
      if (window.XMLHttpRequest)
      {// code for IE7, Firefox, Opera, etc.
        xmlhttp=new XMLHttpRequest();
      } else if (window.ActiveXObject) {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
      if (xmlhttp!=null)
      {
        xmlhttp.onreadystatechange=state_Change;
        xmlhttp.open("GET",url,true);
        xmlhttp.send(null);
      } else {
        alert("Your browser does not support XMLHTTP.");
      }
    function state_Change()
    {
      if (xmlhttp.readyState==4)
      {
        cb(xmlhttp.getAllResponseHeaders());
      }
    }
  };
  log("基础信息", {
    "tagname": "h3"
  });
  log("用户代理：" + (getUAString()));
  log("系统信息：" + (getOSInfo()));
  log("浏览器信息：" + (getBrowserInfo()));
  log("Flash 版本号：" + (getFlashVersion()));
  log("Cookie 状态：" + (getCookieEnable() ? '开启' : '禁用'));
  log("JavaScript 状态：开启 (版本号：" + JS_VERSION + ")");
  log("LocalStorage 状态：" + (store.enabled ? '开启' : '禁用'));
  log("网络信息", {
    "tagname": "h3"
  });
  log("图片 CDN：检测中...", "imgcdn");
  getImageCDNInfo(function(success, total) {
    var msg;
    msg = success === total ? "成功" : "失败";
    return log("图片 CDN：连接" + msg + "，共尝试 " + total + " 张图片，其中 " + success + " 张解析正常", {
      "id": "imgcdn",
      "type": "clear"
    });
  });
  log("Assets CDN：检测中...", {
    "id": "assetscdn2"
  });
  getAssetsCDNInfo(function(success) {
    var msg;
    msg = success ? "成功" : "失败";
    return log("Assets CDN：连接" + msg, {
      "id": "assetscdn2",
      "type": "clear"
    });
  });
  log("Detail页面：检测中...", {
    "id": "detail"
  });
  getDetailInfo(function(success) {
    var msg;
    msg = success ? "成功" : "失败";
    return log("Detail页面：连接" + msg, {
      "id": "detail",
      "type": "clear"
    });
  });
  log("淘宝首页：检测中...", {
    "id": "taobaoindex"
  });
  getTaobaoInfo(function(success) {
    var msg;
    msg = success ? "成功" : "失败";
    return log("淘宝首页：连接" + msg, {
      "id": "taobaoindex",
      "type": "clear"
    });
  });
  log("阿里巴巴首页：检测中...", {
    "id": "alibabaindex"
  });
  getAlibabaInfo(function(success) {
    var msg;
    msg = success ? "成功" : "失败";
    return log("阿里巴巴首页：连接" + msg, {
      "id": "alibabaindex",
      "type": "clear"
    });
  });
  log("小顽童首页：检测中...", {
    "id": "sinaindex"
  });
  getSinaInfo(function(success) {
    var msg;
    msg = success ? "成功" : "失败";
    return log("小顽童首页：连接" + msg, {
      "id": "sinaindex",
      "type": "clear"
    });
  });
  log("小顽童多媒体：检测中...", {
    "id": "tencentindex"
  });
  getTencentInfo(function(success) {
    var msg;
    msg = success ? "成功" : "失败";
    return log("小顽童多媒体：连接" + msg, {
      "id": "tencentindex",
      "type": "clear"
    });
  });
  log("优酷静态文件：检测中...", {
    "id": "youkuindex"
  });
  getYoukuInfo(function(success) {
    var msg;
    msg = success ? "成功" : "失败";
    return log("优酷静态文件：连接" + msg, {
      "id": "youkuindex",
      "type": "clear"
    });
  });
  log("Local DNS：检测中...", "ldns");
  getLDNS(function(data) {
    var msg;
    msg = "" + data.content.ldns + "<br>本地IP：" + data.content.localIp;
    return log("Local DNS：" + msg, {
      "id": "ldns",
      "type": "clear"
    });
  });
  log("Via：检测中...", "Via");
  getUrlVia("https://inetpub.cn/",function(data) {
    var msg;
    console.log(msg);
    msg = data;
    return log("Via：" + msg, {
      "id": "Via",
      "type": "clear"
    });
  });
  viaOnload = function(){
    var urlvalue = document.getElementById("urlVia").value;
    var urlsp = urlvalue.split("/")
    url = urlsp[0] + "//" + urlsp[2]+ ""
    getUrlVia(url,function(data) {
        document.getElementById("urlViaRes").innerText = data;
    });
  };
}).call(this);
</script>
</div>
</body>
</html>
